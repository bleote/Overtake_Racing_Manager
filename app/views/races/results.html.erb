<div class="race-qualy pt-2 m-2 rounded border border-white">
  <div class="gp-page d-flex row justify-content-between align-items-center mx-3">

    <div class="gp-name-and-flag d-flex justify-content-center align-items-center mb-1">
      <div class="gp-name d-flex pe-3 align-items-center">
        <h2><%= @circuit.name %> GP </h2>
      </div>
       <div class="gp-flag d-flex align-items-center">
        <%= image_tag "circuits/#{@circuit.flag}", width: 38 %>
      </div>
    </div>

    <div class="race-results d-flex row justify-content-center">
      <h3>Podium</h3>
      <div class="podium-pictures d-flex rounded border border-white">
        <% first_place_driver = @sorted_race_results.first[0] %>
        <% second_place_driver = @sorted_race_results.second[0] %>
        <% third_place_driver = @sorted_race_results.third[0] %>

        <%= image_tag "drivers/#{second_place_driver.picture}", alt: second_place_driver.name, class: "second-place",width: "100px" %>
        <%= image_tag "drivers/#{first_place_driver.picture}", alt: first_place_driver.name, class: "first-place", width: "100px" %>
        <%= image_tag "drivers/#{third_place_driver.picture}", alt: third_place_driver.name, class: "third-place",width: "100px" %>
      </div>
      <h3>Race Results</h3>

      <table>
        <thead>
          <tr>
            <th>Position</th>
            <th>Driver</th>
            <th>Points</th>
          </tr>
        </thead>
        <tbody>
          <% @sorted_race_results.each_with_index do |(driver, lap_times), index| %>
            <% team_id = @race.team_id %>
            <% row_class = (driver.team_id == team_id) ? 'user-team-row' : '' %>
            <tr class="<%= row_class %>">
              <td><%= index + 1 %></td>
              <td><%= driver.name %></td>
              <td><%= calculate_points(index + 1) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>

    </div>

  </div>
</div>
